<div class='row' data-controller="clauses">
  <div class='col-lg-12'>
    <div class="card">
      <div class="card-header">
        <%= fa_icon 'university' %><strong><%= @regulation.name %></strong>
      </div>

      <div class="card-body">
        <table class="table table-striped table-light table-hover">
          <tbody>
            <tr>
              <td><%= t('.effective_date') %></td>
              <td><%= @regulation.effective_date %></td>
            </tr>
            <tr>
              <td><%= t('.repealed_at') %></td>
              <td><%= @regulation.repealed_at %></td>
            </tr>

             <tr>
              <td><%= t('.status') %></td>
              <td>
                <% if @regulation.repealed? %>
                  <h5><span class="badge bg-danger"><%= t('.repealed') %></span></h5>
                <% else %>
                  <h5><span class="badge bg-success"><%= t('.active') %></span></h5>
                <% end %>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <div class='col-lg-12'>
    <div class="card">
      <div class="card-header">
        <%= fa_icon 'database', text: t('.clauses') %>
      </div>
      <div class="card-body">
        <table class='table table-responsive-sm table-striped table-hover' id="clauses">
          <thead class='thead-dark'>
            <tr>
              <th><%= t('.clause.name') %></th>
              <th><%= t('.number') %></th>
              <th><%= t('.paragraph') %></th>
              <th><%= t('.subparagraph') %></th>
              <th><%= t('.version') %></th>
              <th><%= t('.store') %></th>
            </tr>
          </thead>
          <tbody>
            <% @clauses.each do |clause| %>
              <tr data-action="click->clauses#detail"
                  data-identifier="<%= clause.identifier %>">
                <td><%= clause.klass.display_name %></td>
                <td><%= clause.number %></td>
                <td><%= clause.paragraph.join('/') %></td>
                <td><%= clause.subparagraph.join('/') %></td>
                <td><%= clause.version %></td>
                <td><%= clause.store %></td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>

      <nav aria-label='pagination'>
        <ul class='pagination justify-content-center'>
          <%== pagy_bootstrap_nav(@pagy) %>
        </ul>
      </nav>
    </div>
  </div>


  <div class="modal fade"
       id="clauseDescription"
       tabindex="-1"
       role="dialog"
       aria-labelledby="clauseDescriptionTitle"
       aria-hidden="true"
       data-target="clauses.modal">
  <div class="modal-dialog modal-dialog-scrollable" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="clauseDescriptionTitle"><%= t('.clause.description') %></h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body" data-target="clauses.content" style="min-height: 100px;">
        <%= loading_tag show: true %>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal"><%= t('close')%></button>
      </div>
    </div>
  </div>
</div>
</div>
