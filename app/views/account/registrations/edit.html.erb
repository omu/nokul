<div class='row'>
  <div class='col-sm-12'>
    <div class='card'>
      <div class='card-header'>
        <%= fa_icon 'key' %>
        <strong><%= t('.account_settings') %></strong>
      </div>
      <div class='card-body'>
        <%= simple_form_for(resource, as: resource_name, url: registration_path(resource_name), html: { method: :put }) do |f| %>
          <div class='row'>
            <div class='form-group col-sm-12'>
              <%= f.error_notification %>
            </div>
            <div class='form-group col-sm-12'>
              <%= f.input :email, autofocus: true %>
            </div>
            <div class='form-group col-sm-6'>
              <%= f.input :password, autocomplete: 'off', hint: t('.leave_blank'), required: false, placeholder: false %>
            </div>
            <div class='form-group col-sm-6'>
              <%= f.input :password_confirmation, required: false, placeholder: false %>
            </div>
            <div class='form-group col-sm-12'>
              <%= f.input :current_password, label: t('.current_password'),
                                             hint: t('.current_password_hint'),
                                             required: true,
                                             placeholder: false %>
            </div>
            <div class='form-group col-sm-12'>
              <%= f.button :submit, class: 'btn btn-outline-success btn-sm' %>
              <%= link_to_back(:back) %>
            </div>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>
<div class='row'>
  <div class='col-sm-12'>
    <div class='card'>
      <div class='card-header'>
        <%= fa_icon 'phone' %>
        <strong><%= t('.mobile_phone_updating') %></strong>
      </div>
      <div class='card-body'>
        <%= simple_form_for(resource, url: { action: :phone_verification, controller: 'account/registrations' }, remote: true, html: { method: :put }) do |f| %>
          <div class='row'>
            <div class='form-group col-sm-6'>
              <%= f.input :country, collection: Country.order(:name), value_method: :alpha_2_code, selected: TelephoneNumber.parse(f.object.mobile_phone).country&.country_id, required: true %>
            </div>
            <div class='form-group col-sm-6'>
              <%= f.input :mobile_phone, input_html: { value: TelephoneNumber.parse(f.object.mobile_phone).normalized_number }, required: true %>
            </div>
            <div class='form-group col-sm-12'>
              <%= f.button :submit, t('action_group.update'), class: 'btn btn-outline-success btn-sm' %>
            </div>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>
<div id='verification_modal' class='modal fade' role='dialog' aria-labelledby='myModalLabel' aria-hidden='true' data-backdrop='static' data-keyboard='false'></div>

<script type="text/javascript">
  $('#user_country').select2();
  $('#user_mobile_phone').mask('(999) 999-9999');
</script>
